<!DOCTYPE html>

<html lang="EN">
    <head>
        <meta charset="UTF-8">
        <link rel="icon" type="image/x-icon" href="{{ url_for('static',filename='css/teemill.svg') }}">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/styles.css') }}">
        
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>


        <script src="{{ url_for('static',filename='script/splash.js') }}"> </script>

        <title> Vengeful Vegetables </title>
    </head>
    <div class="splash">
        <img class="splash-icon" src="{{ url_for('static',filename='images/teemill_full.svg') }}">
    </div>
    <body style="margin: 0; overflow: hidden;">
        <form id="inputForm">
            <label for="promptInput">Enter a prompt:</label>
            <input type="text" id="promptInput" name="prompt">
            <button type="submit">Submit</button>
        </form>
        <img id="displayedImage" src="" alt="Generated Image">
        <main> <!-- THIS IS WHERE THE MAIN THINGY IS-->
            <div>
            
            </div>
        </main>
        <script>
            document.getElementById('inputForm').addEventListener('submit', function(event) {
                event.preventDefault();

                const prompt = document.getElementById('promptInput').value;

                fetch('/process_prompt', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({prompt: prompt})
                })
                .then(response => {
                    if (response.ok) {
                    return response.text();
                } else {
                    console.error('Error fetching image from server');
                }})
                .then(text => {
                    document.getElementById('displayedImage').src = text; // Set the src attribute of the image
                })
            })
        </script>
    </body>
    <footer>

    </footer>
</html>